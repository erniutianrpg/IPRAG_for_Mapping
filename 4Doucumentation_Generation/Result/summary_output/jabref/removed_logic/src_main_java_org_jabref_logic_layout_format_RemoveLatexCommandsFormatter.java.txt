This code removes LaTeX commands from a given string while preserving the text content. It processes each character, tracking escape sequences (`\`) and command states to identify and skip LaTeX commands (e.g., `\textbf`, `\~{n}`). It retains letters, special characters, and non-command content, while ignoring braces (`{}`) and whitespace within commands. The result is a cleaned string without LaTeX formatting.