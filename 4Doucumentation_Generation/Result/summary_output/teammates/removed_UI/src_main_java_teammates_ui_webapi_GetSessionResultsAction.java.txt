This code handles fetching and returning feedback session results in a web API. It checks access permissions based on user type (instructor/student) and intent (e.g., viewing full details or personal results). For instructors, it retrieves session results with optional filters; for students, it fetches their personal results. The results are returned as JSON, formatted differently depending on the requester's role. It includes preview functionality and validates session publication status before returning results.