This servlet handles OAuth2 callback functionality for user authentication. It supports two methods: Google OAuth2 and Firebase authentication. For Google OAuth2, it validates the authorization code, retrieves user email, and checks session state. For Firebase, it verifies the ID token and extracts the email. In both cases, it creates a login cookie if authentication succeeds, or an invalidation cookie if it fails, then redirects the user to the specified URL. The servlet ensures secure session handling and proper error logging throughout the process.