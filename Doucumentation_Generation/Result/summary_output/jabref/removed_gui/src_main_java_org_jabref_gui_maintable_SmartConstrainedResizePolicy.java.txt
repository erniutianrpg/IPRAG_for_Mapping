This code implements a custom JavaFX table column resize policy called `SmartConstrainedResizePolicy`. It ensures columns initially size to their preferred width while maintaining that their total width matches the table's width. Unlike JavaFX's default constrained policy, it distributes space proportionally based on preferred widths. The class uses reflection to access private JavaFX methods (`TableUtil.resize` and `constrainedResize`) and fields (`contentWidth`) for resizing functionality. It handles both initial column sizing and subsequent constrained resizing operations.