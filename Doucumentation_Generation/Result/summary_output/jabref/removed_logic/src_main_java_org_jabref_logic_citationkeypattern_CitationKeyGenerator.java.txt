The `CitationKeyGenerator` class generates unique citation keys for BibTeX entries based on user-defined patterns and preferences. It handles pattern expansion, removes unwanted characters, ensures uniqueness by appending letters when needed, and applies regex replacements. The class supports customization through `CitationKeyPatternPreferences`, including handling duplicate keys, special character removal, and keyword modifiers. It integrates with a `BibDatabase` to check for existing keys and maintain uniqueness.